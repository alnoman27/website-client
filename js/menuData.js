function getMenuData() {
  return {
    menus: [
      {
        menu_title: "Menu 1",
        extra_links: [
          { title: "View all insights", link: "#" },
          { title: "Blog", link: "#" },
          { title: "Contact us", link: "#" },
        ],
        submenus: [
          {
            submenu_title: "Proper",
            icon: "/images/coins.svg",

            description_page: {
              top_banner: {
                icon_top_banner: "/images/world.svg",
                title_top_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_top_banner: "#",
                bg_image: "/images/top_bg.jpg",
              },

              bottom_banner: {
                icon_bottom_banner: "/images/world.svg",
                title_bottom_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_bottom_banner: "#",
                bg_image: "/images/bg_image.jpg",
              },

              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
              ],
            },
          },

          {
            submenu_title: "Career",
            icon: "/images/test3.svg",
            description_page: {
              top_banner: {
                icon_top_banner: "/images/world.svg",
                title_top_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_top_banner: "#",
              },

              bottom_banner: {
                icon_bottom_banner: "/images/world.svg",
                title_bottom_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_bottom_banner: "#",
              },

              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
              ],
            },
          },
        ],
      },

      {
        menu_title: "Menu 2",
        extra_links: [
          { title: "View all insights", link: "#" },
          { title: "Contact us", link: "#" },
        ],
        submenus: [
          {
            submenu_title: "Profile",
            icon: "/images/test1.svg",
            description_page: {
              top_banner: {
                icon_top_banner: "/images/world.svg",
                title_top_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_top_banner: "#",
              },

              bottom_banner: {
                icon_bottom_banner: "/images/world.svg",
                title_bottom_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_bottom_banner: "#",
              },

              titles_and_descriptions: [
                {
                  title: "Solutions by Software",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
              ],
            },
          },

          {
            submenu_title: "Domain",
            icon: "/images/test2.svg",
            description_page: {
              top_banner: {
                icon_top_banner: "/images/world.svg",
                title_top_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_top_banner: "#",
              },

              bottom_banner: {
                icon_bottom_banner: "/images/world.svg",
                title_bottom_banner:
                  "We leverage our vast industry knowledge and applied experience to deliver sustainable",
                link_bottom_banner: "#",
              },

              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
              ],
            },
          },

          {
            submenu_title: "Contact",
            icon: "/images/test3.svg",
            description_page: {
              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "test title",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
              ],
            },
          },
        ],
      },

      {
        menu_title: "Menu 3",
        submenus: [
          {
            submenu_title: "Proper",
            icon: "/images/world.svg",
            description_page: {
              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
              ],
            },
          },
        ],
      },

      {
        menu_title: "Menu 4",
        submenus: [
          {
            submenu_title: "Placeholder",
            icon: "/images/test2.svg",
            description_page: {
              titles_and_descriptions: [
                {
                  title: "Solutions by Industry",
                  description:
                    "We leverage our vast industry knowledge and applied experience to deliver sustainable, leading-edge digital solution across multiple sectors.",
                },
              ],

              columns_with_lists: [
                {
                  column_title: "",
                  list: [
                    { title: "Automotive and eMobility", link: "LinkA1" },
                    { title: "Cloud and Service Pro", link: "LinkA2" },
                    { title: "Commercial Real Es", link: "LinkA3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and Se", link: "LinkA2" },
                    { title: "Commercial", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
                {
                  column_title: "",
                  list: [
                    { title: "Data Centers and Networks", link: "LinkB1" },
                    { title: "Energies and Chemicals", link: "LinkB2" },
                    { title: "Food and Beverage", link: "LinkB3" },
                    { title: "Automotive and", link: "LinkA1" },
                    { title: "Cloud and ", link: "LinkA2" },
                    { title: "Commtate", link: "LinkA3" },
                  ],
                },
              ],
            },
          },
        ],
      },
    ],
  };
}

// JS Code here
var selectedMenuItem = null;

document.addEventListener("DOMContentLoaded", function () {
  initializeMenu();
});

function initializeMenu() {
  var menuContainer = document.getElementById("mainMenuContainer");
  var menuData = getMenuData();

  if (menuData && menuData.menus) {
    menuData.menus.forEach(function (menu) {
      var menuItem = document.createElement("li");
      menuItem.textContent = menu.menu_title;

      var downIcon = document.createElementNS(
        "http://www.w3.org/2000/svg",
        "svg"
      );
      downIcon.setAttribute("width", "24");
      downIcon.setAttribute("height", "24");
      downIcon.setAttribute("viewBox", "0 0 24 24");
      loadSVGContent("/images/down-arrow.svg", function (svgContent) {
        downIcon.innerHTML = svgContent;
      });

      menuItem.appendChild(downIcon);

      menuItem.onclick = function () {
        if (selectedMenuItem) {
          resetRotation(selectedMenuItem.querySelector("svg"));
        }
        toggleRotation(downIcon);
        selectedMenuItem = menuItem;
        toggleMenu(menu.menu_title);
      };

      menuContainer.appendChild(menuItem);
    });
  }
}

function toggleRotation(element) {
  element.classList.toggle("rotate180");
}

function resetRotation(element) {
  element.classList.remove("rotate180");
}

function loadSVGContent(url, callback) {
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function () {
    if (xhr.readyState === XMLHttpRequest.DONE) {
      if (xhr.status === 200) {
        callback(xhr.responseText);
      }
    }
  };
  xhr.open("GET", url, true);
  xhr.send();
}

//here i need to show active submenu
function toggleMenu(menuName) {
  var submenuContainer = document.getElementById("submenuContainer");
  var menuContainer = document.getElementById("menuContainer");
  var submenuContainerWrapper = document.getElementById(
    "submenuContainerWrapper"
  );
  var menuData = getMenuData();

  var currentMenu = menuData.menus.find((menu) => menu.menu_title === menuName);

  if (currentMenu) {
    var submenuHTML = "";


    currentMenu.submenus.forEach(function (submenu, index) {
      var isActive = index === 0 ? " active" : "";
      var arrowActiveClass = isActive ? " active" : "";
      submenuHTML +=
        '<div class="submenu' +
        isActive +
        '" style=" display: flex; align-items: center; position: relative"' +
        isActive +
        '" style=" display: flex; align-items: center; position:relative" onmouseover="showSubmenu(this, \'' +
        submenu.submenu_title +
        "')\">" +
        '<img src="' +
        submenu.icon +
        '" alt="' +
        submenu.submenu_title +
        ' Icon" style="height: 20px; width: 20px; padding-right: 15px; font-family: "Graphik";"/>' +
        "<span>" +
        submenu.submenu_title +
        "</span>" +
        '<img src="/images/arrow-right.svg' +
        '" alt="Additional Image" class="submenu-arrow' +
        arrowActiveClass +
        '" style="height: 20px; width: 25px; padding-left: 10px; position: absolute; right: 20px"/>' +
        "</div>";
    });

    if (currentMenu.extra_links) {
      submenuHTML += '<hr style="margin: 30px 0px 20px 0px; background-color: gray;">';
    }

    if (currentMenu.extra_links) {
      currentMenu.extra_links.forEach(function (link, index) {
        submenuHTML +=
          '<div class="extra_links_wrap"><a class="extra_links" href="' +
          link.link +
          '">' +
          link.title +
          "</a></div>";
      });
    }

    submenuContainer.innerHTML = submenuHTML;
    menuContainer.innerHTML = "";

    toggleActive(menuName);

    submenuContainerWrapper.style.display = "flex";
    menuContainer.style.display = "block";

    if (currentMenu.submenus.length > 0) {
      showSubmenu(
        submenuContainer.children[0],
        currentMenu.submenus[0].submenu_title
      );
    }
  }
}

function showSubmenu(submenuElement, submenuTitle) {
  var menuContainer = document.getElementById("menuContainer");
  var menuData = getMenuData();

  var submenus = document.getElementsByClassName("submenu");
  var arrows = document.getElementsByClassName("submenu-arrow");

  for (var i = 0; i < submenus.length; i++) {
    submenus[i].classList.remove("active");
    arrows[i].classList.remove("active");
    arrows[i].style.display = "none";
  }

  submenuElement.classList.add("active");

  var activeIndex = Array.from(submenus).indexOf(submenuElement);
  if (activeIndex !== -1) {
    arrows[activeIndex].classList.add("active");
    arrows[activeIndex].style.display = "inline-block"; // show the arrow for the active submenu
  }

  var activeMenu = Array.from(
    document.querySelectorAll(".menu-container li.active")
  )[0];

  if (activeMenu) {
    var submenuData = menuData.menus
      .find((menu) => menu.menu_title === activeMenu.textContent.trim())
      .submenus.find((submenu) => submenu.submenu_title === submenuTitle);

    if (submenuData) {
      var submenuHTML = "<div ></div>";
      submenuHTML += '<div style=" width: 100%;"  >';
      submenuHTML += '<div style=" width: 95%;"  >';
      if (
        submenuData.description_page.top_banner &&
        submenuData.description_page.top_banner.title_top_banner
      ) {
        submenuHTML +=
          `<a href="${submenuData.description_page.top_banner.link_top_banner}" style="text-decoration: none; color: black;">` +
          `<div class="common-div" style="height: fit-content; padding: 20px; border-radius: 5px; border-radius: 5px; ${
            submenuData.description_page.top_banner.bg_image
              ? `background-image: url('${submenuData.description_page.top_banner.bg_image}'); background-size: cover;`
              : ""
          }">` +
          `<img src="${submenuData.description_page.top_banner.icon_top_banner}" alt="World Image" style="height: 30px; width: 30px; margin-right: 20px;">` +
          `<div>${submenuData.description_page.top_banner.title_top_banner}</div>` +
          `</div>` +
          `</a>`;
      }

      submenuData.description_page.titles_and_descriptions.forEach(function (
        titleDesc
      ) {
        submenuHTML +=
          '<div style="font-size: 15px;  width: 90%;  font-weight: bold;">' +
          titleDesc.title +
          "</div>";
        submenuHTML +=
          '<div style="font-size: 12px; width: 90%; color: gray; margin-top: 5px; margin-bottom: 20px;  ">' +
          titleDesc.description +
          "</div>";
      });

      submenuHTML += `<div class="column-container">`;

      submenuData.description_page.columns_with_lists.forEach((column) => {
        submenuHTML += `<div class="column">
                          <div style="font-size: 15px; font-weight: bold;">${column.column_title}</div>
                          `;

        column.list.forEach((item) => {
          submenuHTML += `<a href="${item.link}" style="text-decoration: none; color: gray"  ><div style="font-size: 12px; margin-top: 5px; " class="link">${item.title}</div></a> `;
        });

        submenuHTML += `</div>`;
      });

      submenuHTML += `</div>`;

      submenuHTML +=
        '<img src="/images/x.svg" alt="close" class="closeButton" style="height: 15px; width: 15px; cursor: pointer" onclick=closePanel()></img>';

      if (
        submenuData.description_page.bottom_banner &&
        submenuData.description_page.bottom_banner.title_bottom_banner
      ) {
        submenuHTML +=
          `<a href="${submenuData.description_page.bottom_banner.link_bottom_banner}" style="text-decoration: none; color: black;">` +
          `<div class="common-div-bottom" style="height: fit-content; padding: 20px; border-radius: 5px; border-radius: 5px; ${
            submenuData.description_page.bottom_banner.bg_image
              ? `background-image: url('${submenuData.description_page.bottom_banner.bg_image}'); background-size: cover;`
              : ""
          }">` +
          `<img src="${submenuData.description_page.bottom_banner.icon_bottom_banner}" alt="World Image" style="height: 30px; width: 30px; margin-right: 20px;">` +
          `<div>${submenuData.description_page.bottom_banner.title_bottom_banner}</div>` +
          `</div>` +
          `</a>`;
      }

      submenuHTML += "</div>";
      submenuHTML += "</div>";

      menuContainer.innerHTML = submenuHTML;
    }
  }
}

function closePanel() {
  var submenuContainerWrapper = document.getElementById(
    "submenuContainerWrapper"
  );
  var menuContainer = document.getElementById("menuContainer");

  // Get the down arrow SVG element from the selected menu item
  var downArrowSVG = selectedMenuItem.querySelector("svg");

  // Reset the rotation
  resetRotation(downArrowSVG);
  submenuContainerWrapper.style.display = "none";
  submenuContainerWrapper.style.border = "none";
  menuContainer.style.display = "none";
  removeActiveClass();
}

function removeActiveClass() {
  var lis = document.querySelectorAll(".menu-container li");
  lis.forEach(function (li) {
    li.classList.remove("active");
  });
}

function toggleActive(menuName) {
  var lis = document.querySelectorAll(".menu-container li");
  lis.forEach(function (li) {
    li.classList.remove("active");
    if (li.textContent.trim() === menuName) {
      li.classList.add("active");
    }
  });
}
